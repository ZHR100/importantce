<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        ul {
            width: 600px;
            padding-left: 0;
            margin: auto;
            list-style: none;
            position: relative;
        }

        li {
            position: absolute;
            left: 0;
            top: 0;
            transition: 0.4s;
        }

        li img {
            width: 600px;
        }
    </style>
</head>

<body>
    <button id="prev">上一张</button>
    <button id="next">下一张</button>
    <ul>
        <li number="-4">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1000.jpg" alt="">
        </li>
        <li number="-3">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1000.jpg" alt="">
        </li>
        <li number="-2">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1000.jpg" alt="">
        </li>
        <li number="-1">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1001.jpg" alt="">
        </li>

        <li number="0">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1002.jpg" alt="">
        </li>

        <li number="1">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1003.jpg" alt="">
        </li>
        <li number="2">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1004.jpg" alt="">
        </li>
        <li number="3">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1000.jpg" alt="">
        </li>
        <li number="4">
            <img src="https://game.gtimg.cn/images/lol/act/img/skin/big1000.jpg" alt="">
        </li>
    </ul>

    <script src="./jquery.js"></script>
    <script>
        // style的样式根据自定义属性number去计算
        // 只要number发生了变化，就得重新计算style
        // 切换的时候，只要关心number怎么变化就可以了

        // var lis = document.querySelectorAll('li')
        // resetStyle()

        // document.getElementById('next').onclick = function () {
        //     var lastNumber = lis[lis.length - 1].getAttribute('number') // 先保存最后一个number的值
        //     for (var i = lis.length - 1; i >= 0; i--) {
        //         if (i === 0) {
        //             lis[i].setAttribute('number', lastNumber)
        //         } else {
        //             var number = lis[i - 1].getAttribute('number')
        //             lis[i].setAttribute('number', number)
        //         }
        //     }
        //     resetStyle()
        // }
        // document.getElementById('prev').onclick = function () {
        //     var firstNumber = lis[0].getAttribute('number') // 先保存第一个number的值
        //     for (var i = 0; i < lis.length; i++) {
        //         if (i === lis.length - 1) {
        //             lis[lis.length - 1].setAttribute('number', firstNumber)
        //         } else {
        //             var number = lis[i + 1].getAttribute('number')
        //             lis[i].setAttribute('number', number)
        //         }
        //     }
        //     resetStyle()
        // }

        // // 重置样式
        // function resetStyle() {
        //     for (var i = 0; i < lis.length; i++) {
        //         var number = lis[i].getAttribute('number')

        //         lis[i].style.transform = 'translateX(' + number * 100 + 'px) scale(' + (1 - (0.1 * Math.abs(number))) + ')'
        //         lis[i].style.zIndex = 100 - Math.abs(number)
        //         lis[i].style.opacity = 1 - 0.1 * Math.abs(number)
        //     }
        // }
        resetStyle()
        $('#next').click(function () {
            var lastNumber = $('li:last').attr('number')
            console.log(lastNumber);
            var lis = $('li')
            for (var i = lis.length - 1; i >= 0; i--) {
                if (i === 0) {
                    $('li').eq(i).attr('number', lastNumber)
                } else {
                    var number = $('li').eq(i - 1).attr('number')
                    $('li').eq(i).attr('number', number)
                }
            }
            resetStyle()
        })

        function resetStyle() {
            $('li').each(function(index, dom) {
                var number = $(dom).attr('number')
                $(dom).css({
                    transform: 'translateX(' + number * 100 + 'px) scale(' + (1 - (0.1 * Math.abs(number))) + ')',
                    zIndex: 100 - Math.abs(number),
                    opacity: 1 - 0.1 * Math.abs(number)
                })
            })
        }
    </script>
</body>

</html>